<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on http://github.com/jonrohan -->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <link rel="stylesheet" href="stylesheets/stylesheet.css" media="screen">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <!--<script type="text/javascript" src="javascripts/script.js"></script>-->
  <script type="text/javascript" src="lib/emtcl.js"></script>
  <script type="text/javascript" src="lib/emjimtcl.js"></script>

  <title>EmTcl</title>
  <meta name="description" content="Tcl compiled with emscripten">

  <meta name="viewport" content="width=device-width,initial-scale=1">

</head>

<body>

  <div class="wrapper">
    <header>
      <h1 class="title">EmTcl</h1>
    </header>
    <div id="container">
      <p class="tagline">Tcl compiled with emscripten</p>
      <div id="main" role="main">
        <div class="download-bar">
        <div class="inner">
          <a href="https://github.com/aidanhs/emtcl/tarball/master" class="download-button tar"><span>Download</span></a>
          <a href="https://github.com/aidanhs/emtcl/zipball/master" class="download-button zip"><span>Download</span></a>
          <a href="https://github.com/aidanhs/emtcl" class="code">View EmTcl on GitHub</a>
        </div>
        <span class="blc"></span><span class="trc"></span>
        </div>
        <article class="_commented_markdown-body">
          <h3>EmTcl Test Page</h3>
          <p>This is a simple test page for running Tcl in the browser.</p>
          <p>The box on the left holds input, the right holds output. You can
            <ul>
              <li>Hit 'Run!' to evaluate, inspect output, tweak input and re-run.</li>
              <li>Hit Ctrl+Enter to use it in a more repl-like manner (which will clear the input box and generally make a vague effort to be a bit like tclsh).</li>
            </ul>
            stdout and stderr are displayed on the alongside script output (like in tclsh).
          </p>

          <button id="tcl_run">Run!</button>
          <div class="demoarea">
            <div id="tcl_in"><textarea>package require TclOO
oo::class create summation {
    constructor {} {
        variable v 0
    }
    method add x {
        variable v
        incr v $x
    }
    method value {} {
        variable v
        return $v
    }
    destructor {
        variable v
        puts "Ended with value $v"
    }
}
set sum [summation new]
puts "Start with [$sum value]"
for {set i 1} {$i &lt;= 10} {incr i} {
    puts "Add $i to get [$sum add $i]"
}
summation destroy</textarea></div>
            <div id="tcl_out"><div><pre></pre></div></div>
          </div>

          <button id="jimtcl_run">Run!</button>
          <div class="demoarea">
            <div id="jimtcl_in"><textarea>proc roman_numeral {i} {
    set num_map {
        1000 M 900 CM 500 D 400 CD
        100 C 90 XC 50 L 40 XL
        10 X 9 IX 5 V 4 IV 1 I
    }
    set res ""
    foreach {value roman} $num_map {
        while {$i &gt;= $value} {
            append res $roman
            incr i -$value
        }
    }
    return $res
}

foreach {n} {5 22 1654} {
    puts "$n - [roman_numeral $n]"
}</textarea></div>

            <div id="jimtcl_out"><div><pre></pre></div></div>
          </div>

          <script>
            function setupRepl(prefix, module) {
              'use strict';
              var $inbox = $('#' + prefix + '_in > textarea');
              var $outbox = $('#' + prefix + '_out > div > pre');
              var outln = function (val) {
                $outbox.text($outbox.text() + val + '\n');
                $outbox[0].scrollTop = $outbox[0].scrollHeight;
              }

              var eval_tcl = (function () {
                var interp = module.CreateInterp();
                // Override default printing
                module.Module.print = module.Module.printErr = outln;

                return function (evalstr) {
                  // This prints any stdout
                  var retval = module.Eval(interp, evalstr);
                  var retstr = module.GetStringResult(interp);
                  // Emulate tclsh a bit
                  if (retstr !== '') {
                    outln(module.GetStringResult(interp));
                  }
                  outln('------' + (retval ? 'ERR ABOVE!' : '') + '------');
                };
              })();
              $('#' + prefix + '_run').on('click', function () {
                  eval_tcl($('#' + prefix + '_in > textarea').val());
              });
              $inbox.keydown(function (e) {
                // Ctrl-Enter pressed
                if ((e.keyCode == 10 || e.keyCode == 13) && e.ctrlKey) {
                  outln('% ' + $inbox.val());
                  eval_tcl($inbox.val());
                  $inbox.val('');
                }
              });
              eval_tcl('puts "' + prefix + ' version: [info patchlevel]"');
            }
            setupRepl('tcl', emtcl);
            setupRepl('jimtcl', emjimtcl);
          </script>
        </article>
      </div>
    </div>
    <footer>
      <div class="owner">
      <p><a href="https://github.com/aidanhs" class="avatar"><img src="https://avatars3.githubusercontent.com/u/1050652?v=2&amp;s=60" width="48" height="48"></a> <a href="https://github.com/aidanhs">aidanhs</a> maintains <a href="https://github.com/aidanhs/emtcl">EmTcl</a></p>


      </div>
      <div class="creds">
        <small>This page generated using <a href="http://pages.github.com/">GitHub Pages</a><br>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a></small>
      </div>
    </footer>
  </div>
  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="https://github.com/aidanhs/emtcl/tarball/master" class="tar">tar</a><a href="https://github.com/aidanhs/emtcl/zipball/master" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-37081910-4', 'auto');
  ga('send', 'pageview');

</script>


</body>
</html>
